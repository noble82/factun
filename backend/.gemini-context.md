# Contexto del Proyecto

##  Estructura de directorios relevante
 - ./admin.js
 - ./app.py
 - ./auth.py
 - ./clientes.py
 - ./consolidar_ventas.py
 - ./csrf.py
 - ./database.py
 - ./Dockerfile
 - ./facturacion.py
 - ./inventario.py
 - ./pos.py
 - ./requirements.txt
 - ./test_csrf.py
 - ./test_validators.py
 - ./validators.py

##  Archivos Python clave (primeras 10 l铆neas)

### ./app.py
```python
 from flask import Flask, request, jsonify, send_file, make_response
 from flask_cors import CORS
 from flask_limiter import Limiter
 from flask_limiter.util import get_remote_address
 import requests
 import os
 from datetime import datetime
 import base64
 import json
 from io import BytesIO
```

### ./csrf.py
```python
 """
 CSRF Token protection module for Sistema POS
 Provides functions to generate, store, and validate CSRF tokens
 """
 
 import secrets
 import hashlib
 import json
 from datetime import datetime, timedelta
 import os
```

### ./auth.py
```python
 """
 M贸dulo de Autenticaci贸n para Sistema POS
 Maneja usuarios, roles y sesiones
 """
 
 from flask import Blueprint, request, jsonify, session
 import hashlib
 import secrets
 from datetime import datetime, timedelta
 from functools import wraps
```

### ./consolidar_ventas.py
```python
 #!/usr/bin/env python3
 """
 Script para consolidar ventas diarias.
 Puede ejecutarse manualmente o mediante cron job.
 
 Uso:
     python3 consolidar_ventas.py              # Consolida el d铆a anterior
     python3 consolidar_ventas.py 2025-12-26  # Consolida una fecha espec铆fica
 """
 
```

### ./pos.py
```python
 """
 M贸dulo POS para Pupuser铆a
 Sistema de punto de venta con flujos para Mesero, Cajero y Cocina
 """
 
 import os
 from datetime import datetime
 from flask import Blueprint, request, jsonify
 from auth import role_required
 import json
```

### ./inventario.py
```python
 """
 M贸dulo de Inventario de Materia Prima y Proveedores para POS
 Gesti贸n de ingredientes, recetas y 贸rdenes de compra
 """
 
 import os
 import sqlite3
 from datetime import datetime
 from flask import Blueprint, request, jsonify
 from auth import role_required
```

### ./test_csrf.py
```python
 """
 Test suite para CSRF protection (csrf.py)
 Prueba generaci贸n, validaci贸n y consumo de tokens CSRF
 """
 
 import sys
 import unittest
 from datetime import datetime, timedelta
 from csrf import generate_csrf_token, validate_csrf_token, _cleanup_expired_tokens
 
```

### ./test_validators.py
```python
 """
 Test suite para validators.py
 Prueba todas las funciones de validaci贸n del sistema POS
 """
 
 import sys
 import unittest
 from validators import (
     validar_email,
     validar_telefono,
```

##  Dependencias
```txt
Flask==3.0.0
flask-cors==4.0.0
flask-limiter==3.5.0
requests==2.31.0
python-dotenv==1.0.0

```

##  Base de datos
./pos.py:    except sqlite3.OperationalError:
./pos.py:        except sqlite3.OperationalError:
./pos.py:        import sqlite3 as sqlite_clientes
./pos.py:        conn_clientes = sqlite_clientes.connect('clientes.db')
./pos.py:        conn_clientes.row_factory = sqlite_clientes.Row
- Usa SQLAlchemy con PostgreSQL/SQLite

##  Endpoints detectados
 - ./app.py:# Registrar Blueprint de Autenticaci贸n
 - ./app.py:# Registrar Blueprint del POS
 - ./app.py:# Registrar Blueprint de Inventario
 - ./app.py:# Registrar Blueprint de Clientes
 - ./app.py:@app.route('/health', methods=['GET'])
 - ./app.py:@app.route('/healthz', methods=['GET'])
 - ./app.py:@app.route('/api/auth/test', methods=['POST'])
 - ./app.py:@app.route('/api/certificar', methods=['POST'])
 - ./app.py:@app.route('/api/anular', methods=['POST'])
 - ./app.py:@app.route('/api/consultar', methods=['GET'])
